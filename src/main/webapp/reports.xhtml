<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      >
    <!--Author : Dr. M H B Ariyaratne, MO(Health Information), buddhika.ari@gmail.com-->
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>#{labels.topic}</title>
        <h:outputStylesheet library="css" name="style.css" />
    </h:head>
    <h:body  >

        <h:form>

            <div id="background">
                <div id="page">
                    <div id="header">
                        <span id="connect">
                            <a href="https://www.facebook.com/suwanihealth" class="facebook"></a>
                            <a href="#" class="twitter"></a>
                            <a href="#" class="vimeo">

                            </a>
                        </span>
                        <span id="infos">
                            <h:commandLink value="Staff Login" action="home" ></h:commandLink>
                            |
                            <h:commandLink value="Administrator" action="home" ></h:commandLink>
                        </span>
                        <h:commandLink action="index" ></h:commandLink>
                        <a href="#" id="logo"></a>

                        <!-- /#logo -->
                        <ul id="navigation">
                            <li ><h:commandLink value="Home" action="index" ></h:commandLink></li>
                            <li><h:commandLink value="About" action="about" ></h:commandLink> </li>
                            <li class="selected"><h:commandLink value="Reports" action="reports" ></h:commandLink></li>
                            <li><h:commandLink value="Channel" action="channelling" ></h:commandLink></li>
                            <li><h:commandLink value="Contact" action="contact-us" ></h:commandLink></li>
                        </ul>
                    </div>
                    <!-- /#header -->
                    <div id="contents">
                        <div id="blogs">

                            <div class="blog-entry-buttons" >

                                <h3>Fill the Deatils and click the button to view your reports</h3>

                                <h:panelGrid columns="2">
                                    <p:outputLabel value="Bill No" ></p:outputLabel>
                                    <p:inputText value="#{sessionController.billNo}" ></p:inputText>
                                    <p:outputLabel value="Phone No" ></p:outputLabel>

                                    <p:inputMask mask="999-9999999" id="txtNewPtPhone" 
                                                 maxlength="11" 
                                                 value="#{sessionController.phoneNo}">
                                    </p:inputMask>

                                    <p:outputLabel value="" ></p:outputLabel>
                                    <h:commandLink  class="blog-entry-buttons"  value= "View" action="#{patientReportController.fillPatientReports}" ></h:commandLink>


                                </h:panelGrid>

                                <div class="defaultTable" >
                                    <table  >
                                        <tr>
                                            <td>
                                                Billed At
                                            </td>
                                            <td>
                                                Reported At
                                            </td>
                                            <td>
                                                Printed At
                                            </td>
                                        </tr>
                                        <ui:repeat value="#{patientReportController.customerReports}" var="dpr"   >
                                            <tr>
                                                <td>sdfsdf</td>
                                            </tr>

                                        </ui:repeat>

                                    </table>
                                </div>

                                <h:dataTable value="#{patientReportController.customerReports}" var="dpr"  styleClass="noBorderGrid" >

                                    <h:column  >
                                        <p:commandLink id="cmdReport" style="text-decoration:underline;" 
                                                       value="#{dpr.item.name}" 
                                                       ajax="false" action="/lab/lab_patient_report_print_customer">
                                            <f:setPropertyActionListener value="#{dpr}" target="#{patientReportController.currentPatientReport}"></f:setPropertyActionListener>
                                        </p:commandLink>
                                    </h:column>
                                    <h:column  >
                                        <h:outputLabel value="#{dpr.patientInvestigation.billItem.bill.createdAt}"  rendered="#{dpr.approved}" >
                                            <f:convertDateTime pattern="dd/MMM/yyyy - hh:mm a"/>
                                        </h:outputLabel>
                                    </h:column>
                                    <h:column  >
                                        <h:outputLabel value="#{dpr.createdAt}"   >
                                            <f:convertDateTime pattern="dd/MMM/yyyy - hh:mm a"/>
                                        </h:outputLabel>
                                    </h:column>
                                    <h:column  >
                                        <h:outputLabel value="#{dpr.approveAt}"  rendered="#{dpr.approved}" >
                                            <f:convertDateTime pattern="dd/MMM/yyyy - hh:mm a"/>
                                        </h:outputLabel>
                                        <p:graphicImage id="imgApproved" library="image/icon" name="approved_icon.png" 
                                                        style="height: 30px; width: 30px; #{dpr.approved ? '':'opacity: 0.1;'}" ></p:graphicImage>
                                    </h:column>
                                    <h:column  >
                                        <h:outputLabel value="#{dpr.printingAt}"  rendered="#{dpr.printed}" >
                                            <f:convertDateTime pattern="dd/MMM/yyyy - hh:mm a"/>
                                        </h:outputLabel>

                                        <p:graphicImage id="imgPrinted" library="image/icon" name="print_ok.png" 
                                                        style="height: 30px; width: 30px;#{dpr.printed ? '':'opacity: 0.1;'}" ></p:graphicImage>
                                    </h:column>
                                </h:dataTable>



                            </div>




                        </div>
                    </div>
                    <!-- /#contents -->
                    <div id="footer">
                        <div id="description">
                            <div> <a href="index.html" class="logo"></a> <span>Copyright &copy; 2012 <a href="#">Company Name</a> All rights reserved | Website Template By <a target="_blank" href="http://www.freewebsitetemplates.com/">freewebsitetemplates.com</a></span> </div>
                            <p> This website template has been designed by Free Website Templates for you, for free. You can replace all this text with your own text. You can remove any link to our website from this website template, you're free to use this website template without linking back to us. If you're having problems editing this website template, then don't hesitate to ask for help on the Forum. </p>
                        </div>
                        <div class="navigation"> <a href="index.html">Home</a>| <a href="about.html">About</a>| <a href="blog.html">Blog</a>| <a href="shop.html">Shop</a>| <a href="contact-us.html">Contact Us</a> </div>
                    </div>
                    <!-- /#footer -->
                </div>
                <!-- /#page -->
            </div>
            <!-- /#background -->

        </h:form>

    </h:body>
</html>
